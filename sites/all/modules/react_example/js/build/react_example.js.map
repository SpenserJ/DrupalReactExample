{"version":3,"sources":["react_example.js","MenuStore.js","MealPlanner.jsx","MenuItem.jsx","MenuList.jsx","main.jsx"],"names":["MenuStore","_store","items","meal","Actions","Reflux","createActions","Store","createStore","listenables","getInitialState","onInitMenu","menu","jQuery","extend","this","trigger","onAddToMeal","id","inArray","push","onRemoveFromMeal","grep","test","get","data","initMenu","MealPlanner","React","createClass","displayName","mixins","connect","render","mealItems","state","store","map","bind","length","item","key","createElement","MenuItem","inMeal","nutritional","reduce","total","calories","parseInt","field_calories","total_fats","field_total_fats","carbohydrates","field_carbohydrates","dietary_fiber","field_dietary_fiber","nutritionalTable","className","props","actionClick","removeFromMeal","addToMeal","name","type","disabled","checked","field_brandon_thordarson","value","onClick","MenuList","filter","vegetarian","brandon","updateFilter","e","newFilter","target","setState","searchFilter","split","Object","keys","matches","term","indexOf","field_vegetarian","size","onChange","document","getElementById"],"mappings":"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","file":"react_example.js","sourcesContent":[null,"var MenuStore = {};\n\n(function () {\n  var _store = {\n    // An object full of item ids and their nutritional information.\n    items: {},\n    // An array of items that make up the user's meal.\n    meal: [],\n  };\n\n  MenuStore.Actions = Reflux.createActions([\n    'initMenu',\n    'addToMeal',\n    'removeFromMeal',\n  ]);\n\n  MenuStore.Store = Reflux.createStore({\n    listenables: [MenuStore.Actions],\n\n    getInitialState: function () {\n      return _store;\n    },\n\n    onInitMenu: function (menu) {\n      jQuery.extend(_store.items, menu);\n\n      this.trigger(_store);\n    },\n\n    onAddToMeal: function (id) {\n      // IDs are stored as a string by the JSON.\n      id = '' + id;\n\n      // If the item is already in our meal, ignore it.\n      if (jQuery.inArray(id, _store.meal) !== -1) { return; }\n\n      _store.meal.push(id);\n\n      this.trigger(_store);\n    },\n\n    onRemoveFromMeal: function (id) {\n      // IDs are stored as a string by the JSON.\n      id = '' + id;\n\n      // Remove any item with the same ID from the meal.\n      _store.meal = jQuery.grep(_store.meal, function (test) {\n        return id != test;\n      });\n\n      this.trigger(_store);\n    },\n  });\n})();\n\njQuery.get('/sites/all/modules/react_example/js/data.json', function (data) {\n  MenuStore.Actions.initMenu(data);\n});\n","var MealPlanner = React.createClass({\n  mixins: [Reflux.connect(MenuStore.Store, 'store')],\n\n  render: function () {\n    var mealItems = this.state.store.meal.map(function (id) {\n      return this.state.store.items[id]\n    }.bind(this));\n\n    if (mealItems.length === 0) {\n      return null;\n    }\n\n    var meal = mealItems.map(function (item) {\n      var key = 'menu-item-' + item.id;\n\n      return (\n        <MenuItem key={key} item={item} inMeal='true' />\n      );\n    });\n\n    var nutritional = mealItems.reduce(function (total, item) {\n      total.calories += (parseInt(item.field_calories, 10) || 0);\n      total.total_fats += (parseInt(item.field_total_fats, 10) || 0);\n      total.carbohydrates += (parseInt(item.field_carbohydrates, 10) || 0);\n      total.dietary_fiber += (parseInt(item.field_dietary_fiber, 10) || 0);\n      return total;\n    }, {\n      calories: 0,\n      total_fats: 0,\n      carbohydrates: 0,\n      dietary_fiber: 0,\n    });\n    var nutritionalTable = (\n      <table>\n        <thead>\n          <tr>\n            <td>Calories</td>\n            <td>Total Fats</td>\n            <td>Carbohydrates</td>\n            <td>Dietary Fiber</td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td>{nutritional.calories}</td>\n            <td>{nutritional.total_fats}</td>\n            <td>{nutritional.carbohydrates}</td>\n            <td>{nutritional.dietary_fiber}</td>\n          </tr>\n        </tbody>\n      </table>\n    );\n\n    return (\n      <div className=\"meal-planner\">\n        <h1>Meal Planner</h1>\n        <table>\n          <thead>\n            <tr>\n              <td>Name</td>\n              <td>Calories</td>\n              <td>Brandon Approved?</td>\n            </tr>\n          </thead>\n          <tbody>\n            {meal}\n          </tbody>\n        </table>\n        {nutritionalTable}\n      </div>\n    );\n  },\n});\n","var MenuItem = React.createClass({\n  render: function () {\n    var item = this.props.item;\n\n    var inMeal = (typeof this.props.inMeal !== 'undefined' && this.props.inMeal);\n    var actionClick = (inMeal)\n          ? MenuStore.Actions.removeFromMeal.bind(null, item.id)\n          : MenuStore.Actions.addToMeal.bind(null, item.id);\n\n    return (\n      <tr>\n        <td>{item.name}</td>\n        <td>{item.field_calories}</td>\n        <td><input type=\"checkbox\" disabled checked={item.field_brandon_thordarson === '1'} /></td>\n        <td><input type=\"button\" value={inMeal ? 'Remove from meal' : 'Add to meal'} onClick={actionClick} /></td>\n      </tr>\n    );\n  },\n});\n","var MenuList = React.createClass({\n  mixins: [Reflux.connect(MenuStore.Store, 'store')],\n\n  getInitialState: function () {\n    return {\n      filter: '',\n      vegetarian: false,\n      brandon: false,\n    };\n  },\n\n  updateFilter: function (e) {\n    var newFilter = {};\n    if (e.target.type === 'checkbox') {\n      newFilter[e.target.name] = e.target.checked;\n    } else {\n      newFilter[e.target.name] = e.target.value;\n    }\n    this.setState(newFilter);\n  },\n\n  render: function () {\n    var searchFilter = this.state.filter.split(/(?:\\s|,)/);\n    var items = Object.keys(this.state.store.items)\n    // Filter out items that are listed in our meal.\n    .filter(function (id) {\n      return jQuery.inArray(id, this.state.store.meal) === -1;\n    }.bind(this))\n    // Map item ids to menu item objects.\n    .map(function (id) {\n      return this.state.store.items[id];\n    }.bind(this))\n    // Filter out items that don't match all search terms.\n    .filter(function (item) {\n      if (searchFilter.length === 0) { return true; }\n      var matches = searchFilter.filter(function (term) {\n        return item.name.indexOf(term) > -1;\n      });\n      return (matches.length === searchFilter.length);\n    })\n    // Filter out items that don't meet our vegetarian filter.\n    .filter(function (item) {\n      return (this.state.vegetarian === false\n           || item.field_vegetarian == this.state.vegetarian);\n    }.bind(this))\n    // Filter out items that don't meet our Brandon filter.\n    .filter(function (item) {\n      return (this.state.brandon === false\n           || item.field_brandon_thordarson == this.state.brandon);\n    }.bind(this))\n    // Map item objects into rendered content.\n    .map(function (item) {\n      return (<MenuItem key={'menu-item-' + item.id} item={item} />);\n    });\n\n    return (\n      <div className=\"menu-items\">\n        <h1>Menu Items</h1>\n        <span>\n          <label>Filter: </label>\n          <input type=\"text\" size=\"60\" name=\"filter\" onChange={this.updateFilter} />\n        </span>\n        <span>\n          <label>Vegetarian: </label>\n          <input type=\"checkbox\" name=\"vegetarian\" onChange={this.updateFilter} />\n        </span>\n        <span>\n          <label>Brandon Approved: </label>\n          <input type=\"checkbox\" name=\"brandon\" onChange={this.updateFilter} />\n        </span>\n        <table>\n          <thead>\n            <tr>\n              <td>Name</td>\n              <td>Calories</td>\n              <td>Brandon Approved?</td>\n            </tr>\n          </thead>\n          <tbody>\n            {items}\n          </tbody>\n        </table>\n      </div>\n    );\n  },\n});\n","React.render(\n  <div className=\"menu\">\n    <MealPlanner />\n    <MenuList />\n  </div>,\n  document.getElementById('react-tutorial')\n);\n"],"sourceRoot":"/source/"}