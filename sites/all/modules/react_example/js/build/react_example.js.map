{"version":3,"sources":["react_example.js","MenuStore.js","MealPlanner.jsx","MenuItem.jsx","MenuList.jsx","main.jsx"],"names":["MenuStore","_store","items","meal","Actions","Reflux","createActions","Store","createStore","listenables","getInitialState","onInitMenu","menu","jQuery","extend","this","trigger","onAddToMeal","id","inArray","push","onRemoveFromMeal","grep","test","get","data","initMenu","MealPlanner","React","createClass","displayName","mixins","connect","render","mealItems","state","store","map","bind","length","item","key","createElement","MenuItem","inMeal","nutritional","reduce","total","calories","parseInt","field_calories","total_fats","field_total_fats","carbohydrates","field_carbohydrates","dietary_fiber","field_dietary_fiber","nutritionalTable","className","props","actionClick","removeFromMeal","addToMeal","name","type","disabled","checked","field_brandon_thordarson","value","onClick","MenuList","filter","updateFilter","e","setState","target","Object","keys","indexOf","size","onChange","document","getElementById"],"mappings":"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","file":"react_example.js","sourcesContent":[null,"var MenuStore = {};\n\n(function () {\n  var _store = {\n    // An object full of item ids and their nutritional information.\n    items: {},\n    // An array of items that make up the user's meal.\n    meal: [],\n  };\n\n  MenuStore.Actions = Reflux.createActions([\n    'initMenu',\n    'addToMeal',\n    'removeFromMeal',\n  ]);\n\n  MenuStore.Store = Reflux.createStore({\n    listenables: [MenuStore.Actions],\n\n    getInitialState: function () {\n      return _store;\n    },\n\n    onInitMenu: function (menu) {\n      jQuery.extend(_store.items, menu);\n\n      this.trigger(_store);\n    },\n\n    onAddToMeal: function (id) {\n      // IDs are stored as a string by the JSON.\n      id = '' + id;\n\n      // If the item is already in our meal, ignore it.\n      if (jQuery.inArray(id, _store.meal) !== -1) { return; }\n\n      _store.meal.push(id);\n\n      this.trigger(_store);\n    },\n\n    onRemoveFromMeal: function (id) {\n      // IDs are stored as a string by the JSON.\n      id = '' + id;\n\n      // Remove any item with the same ID from the meal.\n      _store.meal = jQuery.grep(_store.meal, function (test) {\n        return id != test;\n      });\n\n      this.trigger(_store);\n    },\n  });\n})();\n\njQuery.get('/sites/all/modules/react_example/js/data.json', function (data) {\n  MenuStore.Actions.initMenu(data);\n});\n","var MealPlanner = React.createClass({\n  mixins: [Reflux.connect(MenuStore.Store, 'store')],\n\n  render: function () {\n    var mealItems = this.state.store.meal.map(function (id) {\n      return this.state.store.items[id]\n    }.bind(this));\n\n    if (mealItems.length === 0) {\n      return null;\n    }\n\n    var meal = mealItems.map(function (item) {\n      var key = 'menu-item-' + item.id;\n\n      return (\n        <MenuItem key={key} item={item} inMeal='true' />\n      );\n    });\n\n    var nutritional = mealItems.reduce(function (total, item) {\n      total.calories += (parseInt(item.field_calories, 10) || 0);\n      total.total_fats += (parseInt(item.field_total_fats, 10) || 0);\n      total.carbohydrates += (parseInt(item.field_carbohydrates, 10) || 0);\n      total.dietary_fiber += (parseInt(item.field_dietary_fiber, 10) || 0);\n      return total;\n    }, {\n      calories: 0,\n      total_fats: 0,\n      carbohydrates: 0,\n      dietary_fiber: 0,\n    });\n    var nutritionalTable = (\n      <table>\n        <thead>\n          <tr>\n            <td>Calories</td>\n            <td>Total Fats</td>\n            <td>Carbohydrates</td>\n            <td>Dietary Fiber</td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td>{nutritional.calories}</td>\n            <td>{nutritional.total_fats}</td>\n            <td>{nutritional.carbohydrates}</td>\n            <td>{nutritional.dietary_fiber}</td>\n          </tr>\n        </tbody>\n      </table>\n    );\n\n    return (\n      <div className=\"meal-planner\">\n        <h1>Meal Planner</h1>\n        <table>\n          <thead>\n            <tr>\n              <td>Name</td>\n              <td>Calories</td>\n              <td>Brandon Approved?</td>\n            </tr>\n          </thead>\n          <tbody>\n            {meal}\n          </tbody>\n        </table>\n        {nutritionalTable}\n      </div>\n    );\n  },\n});\n","var MenuItem = React.createClass({\n  render: function () {\n    var item = this.props.item;\n\n    var inMeal = (typeof this.props.inMeal !== 'undefined' && this.props.inMeal);\n    var actionClick = (inMeal)\n          ? MenuStore.Actions.removeFromMeal.bind(null, item.id)\n          : MenuStore.Actions.addToMeal.bind(null, item.id);\n\n    return (\n      <tr>\n        <td>{item.name}</td>\n        <td>{item.field_calories}</td>\n        <td><input type=\"checkbox\" disabled checked={item.field_brandon_thordarson === '1'} /></td>\n        <td><input type=\"button\" value={inMeal ? 'Remove from meal' : 'Add to meal'} onClick={actionClick} /></td>\n      </tr>\n    );\n  },\n});\n","var MenuList = React.createClass({\n  mixins: [Reflux.connect(MenuStore.Store, 'store')],\n\n  getInitialState: function () {\n    return { filter: '', };\n  },\n\n  updateFilter: function (e) {\n    this.setState({ filter: e.target.value, });\n  },\n\n  render: function () {\n    var items = Object.keys(this.state.store.items).map(function (id) {\n      return this.state.store.items[id]\n    }.bind(this))\n    .filter(function (item) {\n      return (this.state.filter === ''\n           || item.name.indexOf(this.state.filter) > -1);\n    }.bind(this))\n    .map(function (item) {\n      return (<MenuItem key={'menu-item-' + item.id} item={item} />);\n    });\n\n    return (\n      <div className=\"menu-items\">\n        <h1>Menu Items</h1>\n        <div>\n          <label>Filter: </label><input type=\"text\" size=\"60\" onChange={this.updateFilter} />\n        </div>\n        <table>\n          <thead>\n            <tr>\n              <td>Name</td>\n              <td>Calories</td>\n              <td>Brandon Approved?</td>\n            </tr>\n          </thead>\n          <tbody>\n            {items}\n          </tbody>\n        </table>\n      </div>\n    );\n  },\n});\n","React.render(\n  <div className=\"menu\">\n    <MealPlanner />\n    <MenuList />\n  </div>,\n  document.getElementById('react-tutorial')\n);\n"],"sourceRoot":"/source/"}